(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{30:function(e,t,a){e.exports=a.p+"static/media/menu.b3f49afd.svg"},31:function(e,t,a){e.exports=a.p+"static/media/close.2c5552a1.svg"},33:function(e,t,a){e.exports=a(62)},38:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(29),c=a.n(l),o=(a(38),a(5)),s=a(3),u=a.n(s),m=a(7),i=a(2),p=a(8),d=a.n(p);var E=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),r=a[0],l=a[1],c=Object(n.useState)(!1),o=Object(i.a)(c,2),s=o[0],p=o[1],E=Object(n.useState)([]),f=Object(i.a)(E,2),b=f[0],v=f[1];return Object(n.useEffect)((function(){e&&function(){var t=Object(m.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.get("/user/infor",{headers:{Authorization:e}});case 3:a=t.sent,l(!0),1===a.data.role?p(!0):p(!1),v(a.data),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),alert(t.t0.response.data.msg);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}()()}),[e]),{isLogged:[r,l],isAdmin:[s,p],infUser:[b,v]}},f=Object(n.createContext)(),b=function(e){var t=e.children,a=Object(n.useState)(!1),l=Object(i.a)(a,2),c=l[0],o=l[1];Object(n.useEffect)((function(){if(localStorage.getItem("firstLogin")){var e=function(){var t=Object(m.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get("/user/refresh_token");case 2:a=t.sent,o(a.data.accesstoken),setTimeout((function(){e()}),3600);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e()}}),[]);var s={token:[c,o],userAPI:E(c)};return r.a.createElement(f.Provider,{value:s},t)},v=a(30),g=a.n(v),h=a(31),w=a.n(h);var j=function(){var e=Object(n.useContext)(f),t=Object(i.a)(e.userAPI.isLogged,1)[0],a=Object(i.a)(e.userAPI.isAdmin,1)[0],l=Object(n.useState)(!1),c=Object(i.a)(l,2),s=c[0],p=c[1],E=function(){var e=Object(m.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/user/logout");case 2:localStorage.removeItem("firstLogin"),window.location.href="/";case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b={left:s?0:"-100%"};return r.a.createElement("header",null,r.a.createElement("div",{className:"menu",onClick:function(){return p(!s)}},r.a.createElement("img",{src:g.a,alt:"",width:"30"})),r.a.createElement("div",{className:"logo"},r.a.createElement("h1",null,r.a.createElement(o.b,{to:"/"},"Login_Sys"))),r.a.createElement("ul",{style:b},r.a.createElement("li",null,r.a.createElement(o.b,{to:"/"},"Home")),a&&r.a.createElement(r.a.Fragment,null),t?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(o.b,{to:"/profile"},"Profile")),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/",onClick:E},"Logout"))):r.a.createElement("li",null,r.a.createElement(o.b,{to:"/login"},"Login \u2725 Register")),r.a.createElement("li",{onClick:function(){return p(!s)}},r.a.createElement("img",{src:w.a,alt:"",width:"30",className:"menu"}))))},O=a(1);var x=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Home Page"))},N=a(13),k=a(11);var y=function(){var e=Object(n.useState)({email:"",password:""}),t=Object(i.a)(e,2),a=t[0],l=t[1],c=function(e){var t=e.target,n=t.name,r=t.value;l(Object(k.a)(Object(k.a)({},a),{},Object(N.a)({},n,r)))},s=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,d.a.post("/user/login",Object(k.a)({},a));case 4:localStorage.setItem("firstLogin",!0),window.location.href="/",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"login-page"},r.a.createElement("form",{onSubmit:s},r.a.createElement("h2",null,"Login"),r.a.createElement("input",{type:"email",name:"email",required:!0,placeholder:"Email",value:a.email,onChange:c}),r.a.createElement("input",{type:"password",name:"password",required:!0,autoComplete:"on",placeholder:"Password",value:a.password,onChange:c}),r.a.createElement("div",{className:"row"},r.a.createElement("button",{type:"submit"},"Login"),r.a.createElement(o.b,{to:"/register"},"Register"))))};var C=function(){var e=Object(n.useState)({name:"",email:"",password:""}),t=Object(i.a)(e,2),a=t[0],l=t[1],c=function(e){var t=e.target,n=t.name,r=t.value;l(Object(k.a)(Object(k.a)({},a),{},Object(N.a)({},n,r)))},s=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,d.a.post("/user/register",Object(k.a)({},a));case 4:localStorage.setItem("firstLogin",!0),window.location.href="/",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"login-page"},r.a.createElement("form",{onSubmit:s},r.a.createElement("h2",null,"Register"),r.a.createElement("input",{type:"text",name:"name",required:!0,placeholder:"Name",value:a.name,onChange:c}),r.a.createElement("input",{type:"email",name:"email",required:!0,placeholder:"Email",value:a.email,onChange:c}),r.a.createElement("input",{type:"password",name:"password",required:!0,autoComplete:"on",placeholder:"Password",value:a.password,onChange:c}),r.a.createElement("div",{className:"row"},r.a.createElement("button",{type:"submit"},"Register"),r.a.createElement(o.b,{to:"/login"},"Login"))))};var P=function(){var e=Object(n.useContext)(f),t=Object(i.a)(e.token,1)[0],a=Object(n.useState)([]),l=Object(i.a)(a,2),c=l[0],s=l[1];Object(n.useEffect)((function(){t&&function(){var e=Object(m.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/user/infor",{headers:{Authorization:t}});case 2:a=e.sent,s(a.data),console.log(a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}));var p=Object(n.useState)({password:""}),E=Object(i.a)(p,2),b=E[0],v=E[1],g=function(){var e=Object(m.a)(u.a.mark((function e(a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.put("/user/update_user",Object(k.a)({},b),{headers:{Authorization:t}});case 3:n=e.sent,console.log(b),alert(n.data.msg),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0.response.data.msg);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container"},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"}),r.a.createElement("div",{className:"col-sm"},r.a.createElement("div",{className:"alert alert-primary",role:"alert"},"This Your Profile Info, You can edit Password :")),r.a.createElement("div",{className:"col-sm"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"}),r.a.createElement("div",{className:"col-sm"},r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("label",{htmlFor:"name"},"Name :")),r.a.createElement("td",null,c.name)),r.a.createElement("br",null),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("label",{htmlFor:"email"},"Email :")),r.a.createElement("td",null,c.email)),r.a.createElement("br",null),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("label",{htmlFor:"name"},"Created At:")),r.a.createElement("td",null,c.createdAt)),r.a.createElement("br",null),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("label",{htmlFor:"password"},"Password :")),r.a.createElement("td",null,r.a.createElement("input",{onChange:function(e){var t=e.target,a=t.name,n=t.value;v(Object(k.a)(Object(k.a)({},b),{},Object(N.a)({},a,n)))},className:"form-control",type:"text",name:"password",placeholder:"New Password"}))),r.a.createElement("br",null),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("label",{htmlFor:"cf_password"},"Confirm Password : \xa0")),r.a.createElement("td",null,r.a.createElement("input",{className:"form-control",type:"text",name:"cf_password",id:"cf_password",placeholder:"Confirm Your New Password"}))),r.a.createElement("br",null),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(o.b,{className:"btn btn-danger",to:"/"},"Back To Home")),r.a.createElement("td",null,r.a.createElement("button",{onClick:g,className:"form-control btn btn-success"},"Update Password"))))),r.a.createElement("div",{className:"col-sm"})))};var S=function(){return r.a.createElement("div",null,"404 | Not Found")};var L=function(){var e=Object(n.useContext)(f),t=Object(i.a)(e.userAPI.isLogged,1)[0];return r.a.createElement(O.c,null,r.a.createElement(O.a,{path:"/",exact:!0,component:x}),r.a.createElement(O.a,{path:"/login",exact:!0,component:t?S:y}),r.a.createElement(O.a,{path:"/register",exact:!0,component:t?S:C}),r.a.createElement(O.a,{path:"/profile",exact:!0,component:t?P:S}),r.a.createElement(O.a,{path:"*",exact:!0,component:S}))};var A=function(){return r.a.createElement(b,null,r.a.createElement(o.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(j,null),r.a.createElement(L,null))))};c.a.render(r.a.createElement(A,null),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.60eb49bf.chunk.js.map